!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).rufflib=t.rufflib||{},t.rufflib.expect=t.rufflib.expect||{},t.rufflib.expect.main=e())}(this,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function c(t,e,c){return e&&n(t.prototype,e),c&&n(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=/^[.#]?[a-z][-_0-9a-z]*$/i;function a(t,e){var n=this,c=this.log,o=this.sections,a=function(){return o.push({failTally:0})-1};return{section:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Untitled Section";c.push({kind:"SectionTitle",sectionIndex:a(),sectionTitle:t})},toBe:function(a){o.length||this.section(),e===a?(n.passTally++,c.push({kind:"Passed",testTitle:t})):(o[o.length-1].failTally++,n.failTally++,n.status="fail",c.push({expected:a,actually:e,kind:"Failed",testTitle:t}))}}}var r="[1m",i="[0m",s="[2m",l="[0m",u="[32mâˆš ",f="[0m",d="[31mX ",p="[0m",h="</s>";function y(t,e,n,c,o,a){var h=function(t,e,n){return"-".repeat(79)+"\n"+"".concat(r).concat(n).concat(i,"\n")+"=".repeat(n.length)+"\n"+(t?"".concat(d,"Failed").concat(p," ").concat(t," of ").concat(t+e):"".concat(u,"Passed").concat(f," ").concat(e," test").concat(1===e?"":"s"))+"\n"+"-".repeat(79)+"\n"}(e,n,o);return h+t.map((function(t){switch(t.kind){case"Failed":return"".concat(d,"Failed").concat(p," ").concat(t.testTitle,":\n")+"  ".concat(s,"expected:").concat(l," ").concat(t.expected,"\n")+"  ".concat(s,"actually:").concat(l," ").concat(t.actually,"\n");case"Passed":return a?"".concat(u,"Passed").concat(f," ").concat(t.testTitle,"\n"):"";case"SectionTitle":return a||c[t.sectionIndex].failTally?"\n".concat(r).concat(t.sectionTitle,":").concat(i,"\n")+"-".repeat(t.sectionTitle.length+1)+"\n":"";default:throw Error("Expect.render(): unexpected item.kind")}})).join("")+(a?"\n\n"+h:"")}function g(t){return t.map((function(t){switch(t.kind){case"Failed":return"".concat("<u>X ","Failed").concat("</u>"," ").concat(t.testTitle,":\n")+"  ".concat("<s>","expected:").concat(h," ").concat(t.expected,"\n")+"  ".concat("<s>","actually:").concat(h," ").concat(t.actually);case"Passed":return"".concat("<i>âˆš ","Passed").concat("</i>"," ").concat(t.testTitle);case"SectionTitle":return"".concat("<b>").concat(t.sectionTitle,":").concat("</b>");default:throw Error("Expect.render(): unexpected item.kind")}})).join("\n")}function m(t){return t.map((function(t){switch(t.kind){case"Failed":return"Failed ".concat(t.testTitle,":\n")+"  expected: ".concat(t.expected,"\n")+"  actually: ".concat(t.actually);case"Passed":return"Passed ".concat(t.testTitle);case"SectionTitle":return t.sectionTitle;default:throw Error("Expect.render(): unexpected item.kind")}})).join("\n")}var x=c((function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Untitled Test Suite";e(this,t),this.expect=a.bind(this),this.log=[],this.sections=[],this.suiteTitle=n,this.failTally=0,this.passTally=0,this.status="pass"}));return x.generateCss=function(e,n){var c=e,a=n;if(!c)throw Error("Expect.generateCss(): the mandatory containerSelector argument is falsey");if("string"!=typeof c)throw Error("Expect.generateCss(): containerSelector is type '".concat(t(c),"' not 'string'"));if(!o.test(c))throw Error("Expect.generateCss(): containerSelector fails ".concat(o));if(!a)throw Error("Expect.generateCss(): the mandatory innerSelector argument is falsey");if("string"!=typeof a)throw Error("Expect.generateCss(): innerSelector is type '".concat(t(a),"' not 'string'"));if(!o.test(a))throw Error("Expect.generateCss(): innerSelector fails ".concat(o));var r=["/* Expect.generateCss('".concat(c,"', '").concat(a,"') */")];return r.push("".concat(c,".fail{background:#642c2c;color:#fce}"),"".concat(c,".pass{background:#2c642c;color:#cfe}")),r.push("".concat(a,"{padding:4px 8px;border-radius:4px;line-height:1.8}"),"".concat(a,"{font-family:Menlo,Consolas,Monaco,Lucida Console,Liberation Mono,"),"DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,sans-serif}","".concat(a,"{text-align:left;white-space:pre}"),"".concat(a,"{background:#222;color:#eee}"),"".concat(c,".fail ").concat(a,"{background:#411;color:#fce}"),"".concat(c,".pass ").concat(a,"{background:#141;color:#cfe}")),r.push("".concat(a," b{color:#eee}"),"".concat(a," i{font-style:normal}"),"".concat(c,".pass i{color:#7fff7f}"),"".concat(a," u{padding:2px 8px;color:#fff;background:#900;text-decoration:none}"),"".concat(a," s{color:#9c8293;text-decoration:none}")),r.join("\n")},x.prototype.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Plain",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.log,c=this.failTally,o=this.passTally,a=this.sections,r=this.suiteTitle;switch(t){case"Ansi":return y(n,c,o,a,r,e);case"Html":return g(this.log);case"Json":return _renderJson(this.log);case"Plain":return m(this.log);case"Raw":return _renderRaw(this.log);default:throw Error("Expect.render(): unexpected format, try 'Ansi|Html|Json|Plain|Raw'")}},x}));
